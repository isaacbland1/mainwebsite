<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Book Notary — Heartbound Journeys</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:#f7f7fb;color:#111}
  .wrap{max-width:900px;margin:0 auto;padding:1rem}
  .card{background:#fff;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.08);padding:1rem;margin:1rem 0}
  label{display:block;margin:.5rem 0 .25rem}
  input,select,textarea{width:100%;padding:.65rem;border:1px solid #ccc;border-radius:10px}
  .row{display:grid;gap:.75rem;grid-template-columns:1fr}
  @media(min-width:800px){.row{grid-template-columns:1fr 1fr}}
  .btn{display:inline-block;background:#1a73e8;color:#fff;padding:.75rem 1rem;border-radius:10px;text-decoration:none;font-weight:600;border:0;cursor:pointer}
  .muted{color:#555;font-size:.92rem}
  .important{background:#fff3cd;border-left:4px solid #856404;padding:1rem;border-radius:8px}
  .est{background:#f0f6ff;border-left:4px solid #1a73e8;padding:0.75rem;border-radius:8px}
  table.quote{width:100%;border-collapse:collapse;margin:.5rem 0}
  table.quote td{padding:.4rem .3rem;border-bottom:1px dashed #ddd}
  table.quote td:last-child{text-align:right}
</style>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</head><body>
  <div class="wrap">
    <p><a href="notary.html">← Back to Notary</a></p>
    <h1>Book a Notary Appointment</h1>

    <div class="card important">
      <p><strong>Important:</strong> We are <em>not</em> a loan signing agent and do <em>not</em> perform real-estate transactions.</p>
      <p>Pricing: <strong>$35 per notarization (stamp)</strong>. Travel uses the same mileage model as rides (home base → signing location). Optional printing: <strong>$5 first page</strong> + <strong>$3 each additional</strong>. Minimum total charge: <strong>$35</strong>.</p>
    </div>

    <p class="muted">Estimator uses Google Maps (traffic-aware) from home base <em>550 Harding Place, Nashville, TN 37211</em> → signing location.</p>

    <div class="card">
      <form id="notaryForm" method="post" action="https://script.google.com/macros/s/AKfycbwiNlrSgfM7CLQ7HCo3VQiak75aF8Mkt7yK_ShHxbxUao_EBEpICu1NFXa4pkCGggnCbQ/exec" target="_self">
        <input type="hidden" name="service" value="notary">
        <input type="hidden" name="redirect" value="https://isaacbland1.github.io/mainwebsite/thanks.html">

        <!-- quote fields populated by estimator -->
        <input type="hidden" id="quoteMiles"        name="quoteMiles">
        <input type="hidden" id="quoteTimeMinutes"  name="quoteTimeMinutes">
        <input type="hidden" id="quoteMultiplier"   name="quoteMultiplier">
        <input type="hidden" id="quoteSurchargeFlat" name="quoteSurchargeFlat">
        <input type="hidden" id="quoteTotalUSD"     name="quoteTotalUSD">

        <div class="row">
          <div>
            <label for="name">Full Name</label>
            <input required id="name" name="name" autocomplete="name">
          </div>
          <div>
            <label for="email">Email</label>
            <input required type="email" id="email" name="email" autocomplete="email">
          </div>
        </div>
        <div class="row">
          <div>
            <label for="phone">Phone</label>
            <input required id="phone" name="phone" autocomplete="tel">
          </div>
          <div>
            <label for="date">Date</label>
            <input required type="date" id="date" name="date">
          </div>
        </div>
        <div class="row">
          <div>
            <label for="time">Start Time</label>
            <input required type="time" id="time" name="time">
          </div>
          <div>
            <label for="duration">Duration (minutes)</label>
            <input required type="number" id="duration" name="duration" value="30" min="5" step="5">
          </div>
        </div>
        <div class="row">
          <div>
            <label for="location">Signing Location Address</label>
            <input required id="location" name="location" placeholder="Start typing address…">
          </div>
          <div>
            <label for="stamps"># of Notarizations (stamps)</label>
            <input required type="number" id="stamps" name="stamps" min="1" value="1">
          </div>
        </div>
        <div class="row">
          <div>
            <label for="printPages">Pages to Print (optional)</label>
            <input type="number" id="printPages" name="printPages" min="0" value="0">
            <p class="muted">Printing: $5 first page + $3 each additional.</p>
          </div>
          <div>
            <label for="paymentMethod">Preferred Payment Method (on-site)</label>
            <select required id="paymentMethod" name="paymentMethod">
              <option value="">Choose…</option>
              <option>Cash</option><option>Debit/Credit</option><option>PayPal</option>
              <option>Cash App</option><option>Venmo</option><option>Zelle</option>
              <option>Apple Pay</option><option>Google Pay</option>
            </select>
          </div>
        </div>

        <div class="card est">
          <div><strong>Estimate</strong></div>
          <div>Distance: <span id="estDistance">—</span> · Time: <span id="estTime">—</span> · Total: <span id="estTotal">$—</span></div>
          <table class="quote" id="breakdown" aria-label="Fare breakdown"></table>
          <p class="muted">Calculated from home base (550 Harding Place) → signing location. Travel uses peak/after-hours surcharges (see estimate breakdown).</p>
          <p><button type="button" class="btn" id="btnEstimate">Update Estimate</button></p>
        </div>

        <div>
          <label for="notes">Document Type / Notes</label>
          <textarea id="notes" name="notes" rows="4" placeholder="Bring valid photo ID; witnesses if required."></textarea>
        </div>

        <p><button class="btn" type="submit">Request Notary</button></p>
      <label>Signing Address (for travel estimate)</label><br>
<input id="nb-address" name="signing_address" type="text" placeholder="Street, City, ZIP" required style="width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;margin-bottom:8px;"><br>
<div id="nb-estimate" style="font-size:.95em;color:#555;margin:6px 0;">Enter address to see travel estimate.</div>
<input type="hidden" name="travel_estimate" id="nb-travel-hidden">
<input type="hidden" name="distance_miles" id="nb-dist-mi">
<input type="hidden" name="duration_minutes" id="nb-dur-min">
<div id="nb-map" style="height:300px;border:1px solid #e2e8f0;border-radius:12px;margin:10px 0;"></div>
</form>
    </div>
  </div>

<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places"></script>
<script>
const HOME = "550 Harding Place, Nashville, TN 37211";
const RATE_PER_MILE = 1.75;
const MIN_CHARGE = 35.00;
const STAMP = 35.00;
const PRINT_FIRST = 5.00;
const PRINT_ADDL  = 3.00;

// Peak windows (Mon=1..Sun=7)
const PEAK_WINDOWS = [
  { days:[1,2,3,4,5], start:"07:00", end:"09:00", multiplier:1.15, flat:0 },
  { days:[1,2,3,4,5], start:"16:00", end:"19:00", multiplier:1.15, flat:0 }
];
// After-hours (wraps midnight)
const AFTER_HOURS = { start:"22:00", end:"06:00", multiplier:1.25, flat:10.00 };

let directionsService;
function initMaps(){
  try{
    directionsService = new google.maps.DirectionsService();
    new google.maps.places.Autocomplete(document.getElementById('location'), { types: ['geocode'] });
  }catch(e){}
}
window.addEventListener('load', initMaps);

function dayNum(d){ return ((d.getDay()+6)%7)+1 } // Mon=1..Sun=7
function hhmm(d){ return d.toTimeString().slice(0,5) }
function inWindow(d,s,e){ const t=hhmm(d); return (s<=e)? (t>=s&&t<e) : (t>=s||t<e) }
function getSurcharges(d){
  let mult=1,flat=0; const dn=dayNum(d);
  for(const w of PEAK_WINDOWS){ if(w.days.includes(dn) && inWindow(d,w.start,w.end)) mult*=w.multiplier; }
  if(inWindow(d,AFTER_HOURS.start,AFTER_HOURS.end)){ mult*=AFTER_HOURS.multiplier; flat+=AFTER_HOURS.flat; }
  return {multiplier:mult, flat:flat};
}

function routeDistance(origin, destination){
  return new Promise((resolve)=>{
    directionsService.route({
      origin, destination, travelMode: 'DRIVING',
      drivingOptions: { departureTime: new Date(), trafficModel: 'bestguess' }
    }, (res, status)=>{
      if(status === 'OK' && res.routes[0]){
        const leg = res.routes[0].legs[0];
        resolve({ miles: leg.distance.value/1609.344, minutes: (leg.duration_in_traffic?leg.duration_in_traffic.value:leg.duration.value)/60 });
      } else resolve(null);
    });
  });
}

async function updateEstimate(){
  const loc = document.getElementById('location').value.trim();
  if(!loc){ alert('Enter the signing location.'); return; }
  const a = await routeDistance(HOME, loc);
  if(!a){ alert('Could not get a route.'); return; }

  const dStr = document.getElementById('date').value;
  const tStr = document.getElementById('time').value;
  if(!dStr || !tStr){ alert('Pick a date and time.'); return; }
  const when = new Date(dStr + "T" + tStr + ":00");

  const miles = a.miles;
  const minutes = a.minutes;
  const stamps = parseInt(document.getElementById('stamps').value||'1',10);
  const pages  = parseInt(document.getElementById('printPages').value||'0',10);

  const surge = getSurcharges(when);
  const travel = Math.max(MIN_CHARGE, miles*RATE_PER_MILE*surge.multiplier + surge.flat);
  const printCost = pages>0 ? (PRINT_FIRST + Math.max(0,pages-1)*PRINT_ADDL) : 0;
  const total = travel + stamps*STAMP + printCost;

  // UI
  document.getElementById('estDistance').textContent = miles.toFixed(1)+' mi';
  document.getElementById('estTime').textContent     = Math.round(minutes)+' min';
  document.getElementById('estTotal').textContent    = '$'+total.toFixed(2);
  const rows = [
    ['Travel ('+miles.toFixed(1)+' mi × $'+RATE_PER_MILE.toFixed(2)+'/mi)', '$'+(miles*RATE_PER_MILE).toFixed(2)],
    [(surge.multiplier>1?'Peak/after-hours × '+surge.multiplier.toFixed(2):'Peak/after-hours'), surge.multiplier>1? '×'+surge.multiplier.toFixed(2): '—'],
    [(surge.flat>0?'Surcharge (flat)':'Surcharge (flat)'), surge.flat>0? '$'+surge.flat.toFixed(2): '—'],
    ['Stamps ($35 × '+stamps+')', '$'+(stamps*STAMP).toFixed(2)],
    ['Printing', (printCost>0?'$'+printCost.toFixed(2):'—')],
    ['Estimated total (min $'+MIN_CHARGE.toFixed(0)+')', '$'+total.toFixed(2)]
  ];
  document.getElementById('breakdown').innerHTML = rows.map(r=>`<tr><td>${r[0]}</td><td>${r[1]}</td></tr>`).join('');

  // Hidden fields -> server
  document.getElementById('quoteMiles').value        = miles.toFixed(2);
  document.getElementById('quoteTimeMinutes').value  = Math.round(minutes);
  document.getElementById('quoteMultiplier').value   = surge.multiplier.toFixed(2);
  document.getElementById('quoteSurchargeFlat').value= surge.flat.toFixed(2);
  document.getElementById('quoteTotalUSD').value     = total.toFixed(2);
}
document.getElementById('btnEstimate').addEventListener('click', updateEstimate);
</script>
<script>const ROUTE_PROXY="http://10.0.0.237:3000";</script>
<script src="https://www.paypal.com/sdk/js?client-id=ATSqeyfRSl5alX1vcCijb2s7AruJT1dIQbL0DWkNJMhV7P3KysXhMWYSWkCy3byrbh4TE5fMlC_vNneS&currency=USD&components=buttons"></script>
<script>(function(){const OSRM_HOST="http://10.0.0.237:5000";const BASE_LAT=36.1627,BASE_LON=-86.7816;const RATE_BASE=25,RATE_PER_MI=1.50;const A=document.getElementById("nb-address"),O=document.getElementById("nb-estimate"),H=document.getElementById("nb-travel-hidden"),MI=document.getElementById("nb-dist-mi"),MN=document.getElementById("nb-dur-min");if(!A)return;const M=L.map("nb-map").setView([BASE_LAT,BASE_LON],12);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap contributors"}).addTo(M);L.marker([BASE_LAT,BASE_LON]).addTo(M).bindPopup("Start (base)");let DM=null,RL=null,T;function D(fn,ms){return(...x)=>{clearTimeout(T);T=setTimeout(()=>fn(...x),ms);};}async function GC(q){const U="https://nominatim.openstreetmap.org/search?format=json&limit=1&q="+encodeURIComponent(q);const R=await fetch(U,{headers:{Accept:"application/json"}});if(!R.ok)throw new Error("geocode");const J=await R.json();if(!J.length)throw new Error("not found");return{lat:parseFloat(J[0].lat),lon:parseFloat(J[0].lon)};}async function RT(lat,lon){const U=OSRM_HOST+"/route/v1/driving/"+BASE_LON+","+BASE_LAT+";"+lon+","+lat+"?overview=full&geometries=geojson";const R=await fetch(U);if(!R.ok)throw new Error("route");const J=await R.json();const X=J&&J.routes&&J.routes[0];if(!X)throw new Error("no route");return X;}function SR(g){if(RL)M.removeLayer(RL);RL=L.geoJSON(g).addTo(M);const B=RL.getBounds();M.fitBounds(B.pad(0.25));}async function EST(){const q=A.value.trim();if(q.length<6){O.textContent="Enter address to see travel estimate.";H.value="";MI.value="";MN.value="";if(RL)M.removeLayer(RL),RL=null;if(DM)M.removeLayer(DM),DM=null;return;}O.textContent="Estimating…";try{const G=await GC(q);if(DM)M.removeLayer(DM);DM=L.marker([G.lat,G.lon]).addTo(M).bindPopup("Signing location");const R=await RT(G.lat,G.lon);const miles=R.distance/1609.344;const mins=Math.round(R.duration/60);const fee=Math.max(0,RATE_BASE+(miles*RATE_PER_MI));SR(R.geometry);const txt="~"+miles.toFixed(1)+" mi • ~"+mins+" min • est travel fee $"+fee.toFixed(2)+" (final by text)";O.textContent=txt;H.value=txt;MI.value=miles.toFixed(2);MN.value=mins;}catch(e){O.textContent="Couldn’t estimate from that address (you can still submit and I’ll confirm by text).";H.value="";MI.value="";MN.value="";}}A.addEventListener("input",D(EST,700));})();</script>
</body></html>
