<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Book Car Ride — Heartbound Journeys</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:#f7f7fb;color:#111}
  .wrap{max-width:820px;margin:0 auto;padding:1rem}
  .card{background:#fff;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.08);padding:1rem;margin:1rem 0}
  label{display:block;margin:.5rem 0 .25rem}
  input,select,textarea{width:100%;padding:.65rem;border:1px solid #ccc;border-radius:10px}
  .row{display:grid;gap:.75rem;grid-template-columns:1fr}
  @media(min-width:700px){.row{grid-template-columns:1fr 1fr}}
  .btn{display:inline-block;background:#1a73e8;color:#fff;padding:.75rem 1rem;border-radius:10px;text-decoration:none;font-weight:600;border:0;cursor:pointer}
  .muted{color:#555;font-size:.9rem}
  .ok{color:#0a8;font-weight:700}
  .err{color:#c00;font-weight:700}
</style>
</head><body>
  <div class="wrap">
    <p><a href="rides.html">← Back to Rides</a></p>
    <h1>Book a Car Ride</h1>
    <p class="muted">We’ll email a confirmation and add it to our calendar.</p>

    <div class="card">
      <form id="rideForm" action="https://script.google.com/macros/s/AKfycbwiNlrSgfM7CLQ7HCo3VQiak75aF8Mkt7yK_ShHxbxUao_EBEpICu1NFXa4pkCGggnCbQ/exec" method="post" target="_self" action="https://script.google.com/macros/s/AKfycbwiNlrSgfM7CLQ7HCo3VQiak75aF8Mkt7yK_ShHxbxUao_EBEpICu1NFXa4pkCGggnCbQ/exec"method="post">
        <input type="hidden" name="service" value="rides">
        <div class="row">
          <div>
            <label for="name">Full Name</label>
            <input required id="name" name="name" autocomplete="name">
          </div>
          <div>
            <label for="email">Email</label>
            <input required type="email" id="email" name="email" autocomplete="email">
          </div>
        </div>
        <div class="row">
          <div>
            <label for="phone">Phone</label>
            <input required id="phone" name="phone" autocomplete="tel">
          </div>
          <div>
            <label for="date">Date</label>
            <input required type="date" id="date" name="date">
          </div>
        </div>
        <div class="row">
          <div>
            <label for="time">Start Time</label>
            <input required type="time" id="time" name="time">
          </div>
          <div>
            <label for="duration">Duration (minutes)</label>
            <input required type="number" id="duration" name="duration" value="60" min="15" step="15">
          </div>
        </div>
        <div>
          <label for="pickup">Pickup Location</label>
          <input required id="pickup" name="pickup">
        </div>
        <div>
          <label for="dropoff">Drop-off Location</label>
          <input required id="dropoff" name="dropoff">
        </div>
        <div>
          <label for="notes">Notes</label>
          <textarea id="notes" name="notes" rows="4" placeholder="Flight number, special requests, etc."></textarea>
        </div>
        <p><button id="submitBtn" class="btn disabled" type="submit" disabled>Request Booking</button></p>
        <input type="hidden" name="redirect" value="https://isaacbland1.github.io/mainwebsite/thanks.html">
      <div id="paypal-button-container"></div>
<div class="muted" id="paypalStatus">Loading PayPal…</div>
</form>
    </div>
  </div>




<script>
(function() {
  var CLIENT_ID = 'ATSqeyfRSl5alX1vcCijb2s7AruJT1dIQbL0DWkNJMhV7P3KysXhMWYSWkCy3byrbh4TE5fMlC_vNneS';
  var STATUS = document.getElementById('paypalStatus');
  function setStatus(msg) { if(STATUS) STATUS.textContent = msg; }

  function renderButtons() {
    if (!(window.paypal && paypal.Buttons)) { return false; }
    var REQUEST_FEE = 15.00;
    paypal.Buttons({
      createOrder: function(data, actions) {
        return actions.order.create({ purchase_units: [{ amount: { value: REQUEST_FEE.toFixed(2) } }] });
      },
      onApprove: async function(data, actions) {
        try {
          var details = await actions.order.capture();
          var form = document.getElementById('rideForm');
          if (form && details && details.id) {
            var hid = document.getElementById('paypalOrderId');
            if (!hid) {
              hid = document.createElement('input');
              hid.type = 'hidden';
              hid.name = 'paypalOrderId';
              hid.id = 'paypalOrderId';
              form.appendChild(hid);
            }
            hid.value = details.id;
            var btn = document.getElementById('submitBtn');
            if (btn) { btn.classList.remove('disabled'); btn.removeAttribute('disabled'); }
            setStatus('Request fee paid. You can submit your booking.');
          }
        } catch(e) {
          setStatus('PayPal error after approval. Please try again or call.');
        }
      },
      onError: function(err) {
        setStatus('PayPal error loading. Try a different browser or disable blockers.');
      }
    }).render('#paypal-button-container');
    return true;
  }

  function loadSDK() {
    // Avoid duplicate loads
    if (document.getElementById('paypal-sdk')) {
      if (!renderButtons()) setTimeout(renderButtons, 300);
      return;
    }
    var s = document.createElement('script');
    s.id = 'paypal-sdk';
    s.src = 'https://www.paypal.com/sdk/js?client-id=' + encodeURIComponent(CLIENT_ID) + '&currency=USD&components=buttons';
    s.onload = function() {
      setStatus(''); 
      if (!renderButtons()) setTimeout(renderButtons, 300);
    };
    s.onerror = function() {
      setStatus('Could not load PayPal. Check Client ID and blockers.');
    };
    document.body.appendChild(s);
  }

  // Kick off
  if (document.readyState === 'complete' || document.readyState === 'interactive') {
    loadSDK();
  } else {
    document.addEventListener('DOMContentLoaded', loadSDK);
  }
})();
</script>

</body></html>
